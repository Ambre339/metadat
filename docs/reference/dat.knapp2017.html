<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Inform modern browsers that this page supports both dark and light color schemes,
  and the page author prefers light. -->
<meta name="color-scheme" content="dark light">
<script>
  // If `prefers-color-scheme` is not supported, fall back to light mode.
  // i.e. In this case, inject the `light` CSS before the others, with
  // no media filter so that it will be downloaded with highest priority.
  if (window.matchMedia("(prefers-color-scheme: dark)").media === "not all") {
    document.documentElement.style.display = "none";
    document.head.insertAdjacentHTML(
      "beforeend",
      "<link id=\"css\" rel=\"stylesheet\" href=\"https://bootswatch.com/3/flatly/bootstrap.css\" onload=\"document.documentElement.style.display = ''\">"
    );
  }
</script>

<title>Studies on Differences in Planning Performance in Schizophrenia Patients versus Healthy Controls — dat.knapp2017 • metadat</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- Flatly Theme - Light  -->
<link id="css-light" rel="stylesheet" href="https://bootswatch.com/3/flatly/bootstrap.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">

<!-- Darkly Theme - Dark -->
<link id="css-dark" rel="stylesheet" href="https://bootswatch.com/3/darkly/bootstrap.css" media="(prefers-color-scheme: dark)">

<!-- preferably CSS -->
<link rel="stylesheet" href="../preferably.css">
<link id="css-code-light" rel="stylesheet" href="../code-color-scheme-light.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
<link id="css-code-dark" rel="stylesheet" href="../code-color-scheme-dark.css" media="(prefers-color-scheme: dark)">

  <script src="../darkswitch.js"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Studies on Differences in Planning Performance in Schizophrenia Patients versus Healthy Controls — dat.knapp2017" />
<meta property="og:description" content="Results from 31 studies examining differences in planning performance in schizophrenia patients versus healthy controls." />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:creator" content="@wviechtb" />
<meta name="twitter:site" content="@wviechtb" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>




<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">metadat</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1-0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Datasets / Functions</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
        <li>
          <a href="#" id="css-toggle-btn">
            <span class="fas fa-adjust fa-lg"></span>
          </a>
        </li>
        
        <li>
  <a href="https://twitter.com/wviechtb">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/wviechtb/metadat">
    <span class="fa fa-github"></span>
     
  </a>
</li>
        
        


      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Studies on Differences in Planning Performance in Schizophrenia Patients versus Healthy Controls</h1>
    
    <div class="hidden name"><code>dat.knapp2017.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Results from 31 studies examining differences in planning performance in schizophrenia patients versus healthy controls.</p>
    </div>

    <pre class="usage"><span class='va'>dat.knapp2017</span></pre>


    <h2 class="hasAnchor" id="format"><a class="anchor" href="#format"></a>Format</h2>

    <p>The data frame contains the following columns:</p><table class='table'>
<tr><td><b>author</b></td><td><code>character</code></td><td>study author(s)</td></tr>
<tr><td><b>year</b></td><td><code>numeric</code></td><td>publication year</td></tr>
<tr><td><b>study</b></td><td><code>numeric</code></td><td>study id number</td></tr>
<tr><td><b>task</b></td><td><code>character</code></td><td>type of task</td></tr>
<tr><td><b>difficulty</b></td><td><code>numeric</code></td><td>task difficulty</td></tr>
<tr><td><b>group1</b></td><td><code>character</code></td><td>identifier for patient group within studies</td></tr>
<tr><td><b>group2</b></td><td><code>character</code></td><td>identifier for control group within studies</td></tr>
<tr><td><b>comp</b></td><td><code>numeric</code></td><td>identifier for comparisons within studies</td></tr>
<tr><td><b>yi</b></td><td><code>numeric</code></td><td>standardized mean difference for planning performance</td></tr>
<tr><td><b>vi</b></td><td><code>numeric</code></td><td>corresponding sampling variance</td></tr>
<tr><td><b>n_sz</b></td><td><code>numeric</code></td><td>number of schizophrenic patients</td></tr>
<tr><td><b>n_hc</b></td><td><code>numeric</code></td><td>number of healthy controls</td></tr>
<tr><td><b>yi</b></td><td><code>numeric</code></td><td>standardized mean difference for IQ</td></tr>
<tr><td><b>vi</b></td><td><code>numeric</code></td><td>corresponding sampling variance</td></tr>
</table>


    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The studies included in this dataset examined differences between schizophrenia patients and healthy controls with respect to their performance on the tower of London test (<a href='https://en.wikipedia.org/wiki/Tower_of_London_test'>https://en.wikipedia.org/wiki/Tower_of_London_test</a>) or a similar cognitive tasks measuring planning ability. The outcome measure for this meta-analysis was the standardized mean difference (with positive values indicating better performance in the healthy controls compared to the schizophrenia patients).</p>
<p>The dataset has a more complex structure for several reasons:</p><ol>
<li><p>Studies 2, 3, 9, and 20 included more than one schizophrenia patient group and the standardized mean differences were computed by comparing these groups against a single healthy control group.</p></li>
<li><p>Studies 6, 12, 14, 15, 18, 19, 22, and 26 had the patients and controls complete different tasks of varying complexity (essentially the average number of moves required to complete a task).</p></li>
<li><p>Study 24 provides two standardized mean differences, one for men and the other for women.</p></li>
<li><p>Study 29 provides three standardized mean differences, corresponding to the three different COMT Val158Met genotypes (val/val, val/met, and met/met).</p></li>
</ol><p>All 4 issues described above lead to a multilevel structure in the dataset, with multiple standardized mean differences nested within some of the studies. Issues 1. and 2. also lead to correlated sampling errors.</p>
    <h2 class="hasAnchor" id="source"><a class="anchor" href="#source"></a>Source</h2>

    <p>Knapp, F., Viechtbauer, W., Leonhart, R., Nitschke, K., &amp; Kaller, C. P. (2017). Planning performance in schizophrenia patients: A meta-analysis of the influence of task difficulty and clinical and sociodemographic variables. <em>Psychological Medicine</em>, <b>47</b>(11), 2002--2016. <a href='https://doi.org/10.1017/S0033291717000459'>https://doi.org/10.1017/S0033291717000459</a></p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Wolfgang Viechtbauer, <a href='mailto:wvb@metafor-project.org'>wvb@metafor-project.org</a>, <a href='https://www.metafor-project.org'>https://www.metafor-project.org</a></p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>### copy data into 'dat' and examine data</span>
<span class='va'>dat</span> <span class='op'>&lt;-</span> <span class='va'>dat.knapp2017</span>
<span class='va'>dat</span>
</div><div class='output co'>#&gt;                 authors year study            task difficulty group1 group2
#&gt; 1        Badcock et al. 2005     1    SOC (CANTAB)       3.83     SZ     HC
#&gt; 2           Braw et al. 2008     2    SOC (CANTAB)       3.83    SZ1     HC
#&gt; 3           Braw et al. 2008     2    SOC (CANTAB)       3.83    SZ2     HC
#&gt; 4           Braw et al. 2012     3    SOC (CANTAB)       3.83    SZ1     HC
#&gt; 5           Braw et al. 2012     3    SOC (CANTAB)       3.83    SZ2     HC
#&gt; 6           Braw et al. 2012     3    SOC (CANTAB)       3.83    SZ3     HC
#&gt; 7           Braw et al. 2012     3    SOC (CANTAB)       3.83    SZ4     HC
#&gt; 8        Bustini et al. 1999     4             TOH         NA     SZ     HC
#&gt; 9        Dichter et al. 2006     5             TOL         NA     SZ     HC
#&gt; 10       Elliott et al. 1998     6    SOC (CANTAB)       2.00     SZ     HC
#&gt; 11       Elliott et al. 1998     6    SOC (CANTAB)       3.00     SZ     HC
#&gt; 12       Elliott et al. 1998     6    SOC (CANTAB)       4.00     SZ     HC
#&gt; 13       Elliott et al. 1998     6    SOC (CANTAB)       5.00     SZ     HC
#&gt; 14       Elliott et al. 1998     6 SOC (one-touch)       2.00     SZ     HC
#&gt; 15       Elliott et al. 1998     6 SOC (one-touch)       3.00     SZ     HC
#&gt; 16       Elliott et al. 1998     6 SOC (one-touch)       4.00     SZ     HC
#&gt; 17       Elliott et al. 1998     6 SOC (one-touch)       5.00     SZ     HC
#&gt; 18      Feldmann et al. 2006     7             SOC       3.50     SZ     HC
#&gt; 19      Goldberg et al. 1990     8             TOH         NA     SZ     HC
#&gt; 20     Greenwood et al. 2011     9             TOL       4.00    SZ1     HC
#&gt; 21     Greenwood et al. 2011     9             TOL       4.00    SZ2     HC
#&gt; 22         Hilti et al. 2010    10    SOC (CANTAB)       3.83     SZ     HC
#&gt; 23         Huddy et al. 2007    11    SOC (CANTAB)       3.83     SZ     HC
#&gt; 24         Joyce et al. 2002    12    SOC (CANTAB)       2.00     SZ     HC
#&gt; 25         Joyce et al. 2002    12    SOC (CANTAB)       3.00     SZ     HC
#&gt; 26         Joyce et al. 2002    12    SOC (CANTAB)       4.00     SZ     HC
#&gt; 27         Joyce et al. 2002    12    SOC (CANTAB)       5.00     SZ     HC
#&gt; 28    Krabbendam et al. 1999    13             TOL         NA     SZ     HC
#&gt; 29       Langdon et al. 2001    14             TOL       2.00     SZ     HC
#&gt; 30       Langdon et al. 2001    14             TOL       3.00     SZ     HC
#&gt; 31       Langdon et al. 2001    14             TOL       4.00     SZ     HC
#&gt; 32       Langdon et al. 2001    14             TOL       5.00     SZ     HC
#&gt; 33       Langdon et al. 2002    15             TOL       2.00     SZ     HC
#&gt; 34       Langdon et al. 2002    15             TOL       3.00     SZ     HC
#&gt; 35       Langdon et al. 2002    15             TOL       4.00     SZ     HC
#&gt; 36       Langdon et al. 2002    15             TOL       5.00     SZ     HC
#&gt; 37    Marczewski et al. 2001    16             TOL       4.67     SZ     HC
#&gt; 38        Morice et al. 1996    17             TOL       3.50     SZ     HC
#&gt; 39        Morris et al. 1995    18             TOL       3.00     SZ     HC
#&gt; 40        Morris et al. 1995    18             TOL       4.00     SZ     HC
#&gt; 41        Morris et al. 1995    18             TOL       5.00     SZ     HC
#&gt; 42      Pantelis et al. 1997    19    SOC (CANTAB)       2.00     SZ     HC
#&gt; 43      Pantelis et al. 1997    19    SOC (CANTAB)       3.00     SZ     HC
#&gt; 44      Pantelis et al. 1997    19    SOC (CANTAB)       4.00     SZ     HC
#&gt; 45      Pantelis et al. 1997    19    SOC (CANTAB)       5.00     SZ     HC
#&gt; 46        Tenjin et al. 2012    20          BACS-J         NA    SZ1     HC
#&gt; 47        Tenjin et al. 2012    20          BACS-J         NA    SZ2     HC
#&gt; 48         Tyson et al. 2004    21    SOC (CANTAB)       3.83     SZ     HC
#&gt; 49           Zhu et al. 2010    22             TOL       2.00     SZ     HC
#&gt; 50           Zhu et al. 2010    22             TOL       3.00     SZ     HC
#&gt; 51           Zhu et al. 2010    22             TOL       4.00     SZ     HC
#&gt; 52             Andersen 2013    23             SOC       3.83     SZ     HC
#&gt; 53 Ayesa-Arriola et al. 2013    24      TOL-Drexel       5.50    SZ1    HC1
#&gt; 54 Ayesa-Arriola et al. 2013    24      TOL-Drexel       5.50    SZ2    HC2
#&gt; 55            Fagerlund 2004    25             SOC       3.83     SZ     HC
#&gt; 56        Kontis et al. 2013    26             SOC       2.00     SZ     HC
#&gt; 57        Kontis et al. 2013    26             SOC       3.00     SZ     HC
#&gt; 58        Kontis et al. 2013    26             SOC       4.00     SZ     HC
#&gt; 59        Kontis et al. 2013    26             SOC       5.00     SZ     HC
#&gt; 60      Okruszek et al. 2013    27      TOL-Drexel       5.50     SZ     HC
#&gt; 61        Saleem et al. 2013    28             SOC       3.83     SZ     HC
#&gt; 62    Tsuchimine et al. 2013    29          BACS-J         NA    SZ1    HC1
#&gt; 63    Tsuchimine et al. 2013    29          BACS-J         NA    SZ2    HC2
#&gt; 64    Tsuchimine et al. 2013    29          BACS-J         NA    SZ3    HC3
#&gt; 65       Asevedo et al. 2013    30             TOL       3.83     SZ     HC
#&gt; 66          Shum et al. 2004    31 TOL (four-disk)       5.60     SZ     HC
#&gt;    comp    yi    vi n_sz n_hc yi_iq vi_iq
#&gt; 1     1  0.62 0.075   24   33  0.72 0.076
#&gt; 2     1  0.46 0.047   44   44    NA    NA
#&gt; 3     2  0.73 0.052   38   44    NA    NA
#&gt; 4     1  1.18 0.062   39   37    NA    NA
#&gt; 5     2  1.09 0.073   27   37    NA    NA
#&gt; 6     3  0.91 0.102   15   37    NA    NA
#&gt; 7     4  0.91 0.084   20   37    NA    NA
#&gt; 8     1  0.57 0.074   28   28    NA    NA
#&gt; 9     1  0.40 0.180   13   10    NA    NA
#&gt; 10    1  0.43 0.170   12   12  0.12 0.167
#&gt; 11    2  1.37 0.206   12   12  0.12 0.167
#&gt; 12    3  0.23 0.168   12   12  0.12 0.167
#&gt; 13    4  0.97 0.186   12   12  0.12 0.167
#&gt; 14    5  0.56 0.173   12   12  0.12 0.167
#&gt; 15    6  0.79 0.180   12   12  0.12 0.167
#&gt; 16    7  1.19 0.196   12   12  0.12 0.167
#&gt; 17    8  0.92 0.184   12   12  0.12 0.167
#&gt; 18    1  0.20 0.096   22   20  0.62 0.100
#&gt; 19    1  1.42 0.180   13   15    NA    NA
#&gt; 20    1  0.35 0.074   27   28  1.21 0.086
#&gt; 21    2  0.88 0.078   28   28  1.26 0.086
#&gt; 22    1  1.08 0.079   26   33  0.76 0.074
#&gt; 23    1  0.94 0.111   20   20  0.42 0.102
#&gt; 24    1  0.44 0.020  135   81  0.49 0.020
#&gt; 25    2  0.63 0.021  135   81  0.49 0.020
#&gt; 26    3  0.38 0.020  135   81  0.49 0.020
#&gt; 27    4  0.93 0.022  135   81  0.49 0.020
#&gt; 28    1  0.33 0.102   24   17    NA    NA
#&gt; 29    1  0.00 0.073   32   24    NA    NA
#&gt; 30    2 -0.06 0.073   32   24    NA    NA
#&gt; 31    3  0.73 0.078   32   24    NA    NA
#&gt; 32    4  0.48 0.075   32   24    NA    NA
#&gt; 33    1  0.43 0.092   25   20    NA    NA
#&gt; 34    2  0.72 0.096   25   20    NA    NA
#&gt; 35    3  0.80 0.097   25   20    NA    NA
#&gt; 36    4  1.30 0.109   25   20    NA    NA
#&gt; 37    1  1.84 0.190   15   15    NA    NA
#&gt; 38    1  2.58 0.216   17   17  0.58 0.123
#&gt; 39    1  0.25 0.071   30   27  0.18 0.071
#&gt; 40    2  0.86 0.077   30   27  0.18 0.071
#&gt; 41    3  0.68 0.074   30   27  0.18 0.071
#&gt; 42    1  0.21 0.060   36   31  0.48 0.062
#&gt; 43    2  0.65 0.063   36   31  0.48 0.062
#&gt; 44    3  0.30 0.061   36   31  0.48 0.062
#&gt; 45    4  0.45 0.062   36   31  0.48 0.062
#&gt; 46    1  1.03 0.054   20  340    NA    NA
#&gt; 47    2  0.92 0.104   10  340    NA    NA
#&gt; 48    1  1.12 0.108   28   17    NA    NA
#&gt; 49    1  0.52 0.052   40   40    NA    NA
#&gt; 50    2  0.50 0.052   40   40    NA    NA
#&gt; 51    3  0.49 0.051   40   40    NA    NA
#&gt; 52    1  0.30 0.042   48   48    NA    NA
#&gt; 53    1  0.36 0.022   86   97  0.47 0.023
#&gt; 54    2  0.41 0.030   75   62  0.10 0.030
#&gt; 55    1  0.79 0.086   25   25    NA    NA
#&gt; 56    1  0.23 0.031   77   55    NA    NA
#&gt; 57    2  0.58 0.032   77   55    NA    NA
#&gt; 58    3  0.57 0.032   77   55    NA    NA
#&gt; 59    4  0.79 0.034   77   55    NA    NA
#&gt; 60    1  0.70 0.071   30   30    NA    NA
#&gt; 61    1  1.16 0.136   20   15  0.23 0.117
#&gt; 62    1  1.29 0.039   56   68  0.37 0.033
#&gt; 63    2  0.63 0.039   47   62  0.43 0.038
#&gt; 64    3  0.31 0.121   15   19  1.00 0.134
#&gt; 65    1  0.11 0.070   30   27    NA    NA
#&gt; 66    1  0.87 0.036   60   60    NA    NA</div><div class='input'>
<span class='co'># \dontrun{</span>

<span class='co'>### load metafor package</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://www.metafor-project.org'>metafor</a></span><span class='op'>)</span>

<span class='co'>### fit a standard random-effects model ignoring the issues described above</span>
<span class='va'>res</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://wviechtb.github.io/metafor/reference/rma.uni.html'>rma</a></span><span class='op'>(</span><span class='va'>yi</span>, <span class='va'>vi</span>, data<span class='op'>=</span><span class='va'>dat</span><span class='op'>)</span>
<span class='va'>res</span>
</div><div class='output co'>#&gt; 
#&gt; Random-Effects Model (k = 66; tau^2 estimator: REML)
#&gt; 
#&gt; tau^2 (estimated amount of total heterogeneity): 0.0551 (SE = 0.0212)
#&gt; tau (square root of estimated tau^2 value):      0.2348
#&gt; I^2 (total heterogeneity / total variability):   47.74%
#&gt; H^2 (total variability / sampling variability):  1.91
#&gt; 
#&gt; Test for Heterogeneity:
#&gt; Q(df = 65) = 129.0088, p-val &lt; .0001
#&gt; 
#&gt; Model Results:
#&gt; 
#&gt; estimate      se     zval    pval   ci.lb   ci.ub 
#&gt;   0.6557  0.0439  14.9521  &lt;.0001  0.5698  0.7417  *** 
#&gt; 
#&gt; ---
#&gt; Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1
#&gt; </div><div class='input'>
<span class='co'>### fit a multilevel model with random effects for studies and comparisons within studies</span>
<span class='co'>### (but this ignored the correlation in the sampling errors)</span>
<span class='va'>res</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://wviechtb.github.io/metafor/reference/rma.mv.html'>rma.mv</a></span><span class='op'>(</span><span class='va'>yi</span>, <span class='va'>vi</span>, random <span class='op'>=</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>|</span> <span class='va'>study</span><span class='op'>/</span><span class='va'>comp</span>, data<span class='op'>=</span><span class='va'>dat</span><span class='op'>)</span>
<span class='va'>res</span>
</div><div class='output co'>#&gt; 
#&gt; Multivariate Meta-Analysis Model (k = 66; method: REML)
#&gt; 
#&gt; Variance Components:
#&gt; 
#&gt;             estim    sqrt  nlvls  fixed      factor 
#&gt; sigma^2.1  0.0383  0.1958     31     no       study 
#&gt; sigma^2.2  0.0263  0.1621     66     no  study/comp 
#&gt; 
#&gt; Test for Heterogeneity:
#&gt; Q(df = 65) = 129.0088, p-val &lt; .0001
#&gt; 
#&gt; Model Results:
#&gt; 
#&gt; estimate      se     zval    pval   ci.lb   ci.ub 
#&gt;   0.6801  0.0560  12.1513  &lt;.0001  0.5704  0.7898  *** 
#&gt; 
#&gt; ---
#&gt; Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1
#&gt; </div><div class='input'>
<span class='co'>### create variable that indicates the task and difficulty combination as increasing integers</span>
<span class='va'>dat</span><span class='op'>$</span><span class='va'>task.diff</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/split.html'>split</a></span><span class='op'>(</span><span class='va'>dat</span>, <span class='va'>dat</span><span class='op'>$</span><span class='va'>study</span><span class='op'>)</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>{</span>
   <span class='va'>task.int</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/integer.html'>as.integer</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>$</span><span class='va'>task</span><span class='op'>)</span><span class='op'>)</span>
   <span class='va'>diff.int</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/integer.html'>as.integer</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>$</span><span class='va'>difficulty</span><span class='op'>)</span><span class='op'>)</span>
   <span class='va'>diff.int</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>diff.int</span><span class='op'>)</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fl'>1</span>
   <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='va'>task.int</span>, <span class='st'>"."</span>, <span class='va'>diff.int</span><span class='op'>)</span><span class='op'>}</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>### construct correlation matrix for two tasks with four different difficulties where the</span>
<span class='co'>### correlation is 0.4 for different difficulties of the same task, 0.7 for the same</span>
<span class='co'>### difficulty of different tasks, and 0.28 for different difficulties of different tasks</span>
<span class='va'>R</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='fl'>0.4</span>, nrow<span class='op'>=</span><span class='fl'>8</span>, ncol<span class='op'>=</span><span class='fl'>8</span><span class='op'>)</span>
<span class='va'>R</span><span class='op'>[</span><span class='fl'>5</span><span class='op'>:</span><span class='fl'>8</span>,<span class='fl'>1</span><span class='op'>:</span><span class='fl'>4</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='va'>R</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>4</span>,<span class='fl'>5</span><span class='op'>:</span><span class='fl'>8</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fl'>0.28</span>
<span class='fu'><a href='https://rdrr.io/r/base/diag.html'>diag</a></span><span class='op'>(</span><span class='va'>R</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>4</span>,<span class='fl'>5</span><span class='op'>:</span><span class='fl'>8</span><span class='op'>]</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fl'>0.7</span>
<span class='fu'><a href='https://rdrr.io/r/base/diag.html'>diag</a></span><span class='op'>(</span><span class='va'>R</span><span class='op'>[</span><span class='fl'>5</span><span class='op'>:</span><span class='fl'>8</span>,<span class='fl'>1</span><span class='op'>:</span><span class='fl'>4</span><span class='op'>]</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fl'>0.7</span>
<span class='fu'><a href='https://rdrr.io/r/base/diag.html'>diag</a></span><span class='op'>(</span><span class='va'>R</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fl'>1</span>
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>rownames</a></span><span class='op'>(</span><span class='va'>R</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>R</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span>, each<span class='op'>=</span><span class='fl'>4</span><span class='op'>)</span>, <span class='st'>"."</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>4</span><span class='op'>)</span>
<span class='va'>R</span>
</div><div class='output co'>#&gt;      1.1  1.2  1.3  1.4  2.1  2.2  2.3  2.4
#&gt; 1.1 1.00 0.40 0.40 0.40 0.70 0.28 0.28 0.28
#&gt; 1.2 0.40 1.00 0.40 0.40 0.28 0.70 0.28 0.28
#&gt; 1.3 0.40 0.40 1.00 0.40 0.28 0.28 0.70 0.28
#&gt; 1.4 0.40 0.40 0.40 1.00 0.28 0.28 0.28 0.70
#&gt; 2.1 0.70 0.28 0.28 0.28 1.00 0.40 0.40 0.40
#&gt; 2.2 0.28 0.70 0.28 0.28 0.40 1.00 0.40 0.40
#&gt; 2.3 0.28 0.28 0.70 0.28 0.40 0.40 1.00 0.40
#&gt; 2.4 0.28 0.28 0.28 0.70 0.40 0.40 0.40 1.00</div><div class='input'>
<span class='co'>### construct an approximate V matrix accounting for the use of shared groups and</span>
<span class='co'>### for correlations among tasks/difficulties as specified in the R matrix above</span>
<span class='va'>V</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://wviechtb.github.io/metafor/reference/vcalc.html'>vcalc</a></span><span class='op'>(</span><span class='va'>vi</span>, cluster<span class='op'>=</span><span class='va'>study</span>, grp1<span class='op'>=</span><span class='va'>group1</span>, grp2<span class='op'>=</span><span class='va'>group2</span>, w1<span class='op'>=</span><span class='va'>n_sz</span>, w2<span class='op'>=</span><span class='va'>n_hc</span>,
           obs<span class='op'>=</span><span class='va'>task.diff</span>, rho<span class='op'>=</span><span class='va'>R</span>, data<span class='op'>=</span><span class='va'>dat</span><span class='op'>)</span>

<span class='co'>### correlation matrix for study 3 with four patient groups and a single control group</span>
<span class='fu'><a href='https://rdrr.io/r/stats/cor.html'>cov2cor</a></span><span class='op'>(</span><span class='va'>V</span><span class='op'>[</span><span class='va'>dat</span><span class='op'>$</span><span class='va'>study</span> <span class='op'>==</span> <span class='fl'>3</span>, <span class='va'>dat</span><span class='op'>$</span><span class='va'>study</span> <span class='op'>==</span> <span class='fl'>3</span><span class='op'>]</span><span class='op'>)</span>
</div><div class='output co'>#&gt;           [,1]      [,2]      [,3]      [,4]
#&gt; [1,] 1.0000000 0.4652832 0.3847419 0.4243294
#&gt; [2,] 0.4652832 1.0000000 0.3488477 0.3847419
#&gt; [3,] 0.3847419 0.3488477 1.0000000 0.3181424
#&gt; [4,] 0.4243294 0.3847419 0.3181424 1.0000000</div><div class='input'>
<span class='co'>### correlation matrix for study 6 with two tasks with four difficulties</span>
<span class='fu'><a href='https://rdrr.io/r/stats/cor.html'>cov2cor</a></span><span class='op'>(</span><span class='va'>V</span><span class='op'>[</span><span class='va'>dat</span><span class='op'>$</span><span class='va'>study</span> <span class='op'>==</span> <span class='fl'>6</span>, <span class='va'>dat</span><span class='op'>$</span><span class='va'>study</span> <span class='op'>==</span> <span class='fl'>6</span><span class='op'>]</span><span class='op'>)</span>
</div><div class='output co'>#&gt;      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
#&gt; [1,] 1.00 0.40 0.40 0.40 0.70 0.28 0.28 0.28
#&gt; [2,] 0.40 1.00 0.40 0.40 0.28 0.70 0.28 0.28
#&gt; [3,] 0.40 0.40 1.00 0.40 0.28 0.28 0.70 0.28
#&gt; [4,] 0.40 0.40 0.40 1.00 0.28 0.28 0.28 0.70
#&gt; [5,] 0.70 0.28 0.28 0.28 1.00 0.40 0.40 0.40
#&gt; [6,] 0.28 0.70 0.28 0.28 0.40 1.00 0.40 0.40
#&gt; [7,] 0.28 0.28 0.70 0.28 0.40 0.40 1.00 0.40
#&gt; [8,] 0.28 0.28 0.28 0.70 0.40 0.40 0.40 1.00</div><div class='input'>
<span class='co'>### correlation matrix for study 24 with two independent groups</span>
<span class='fu'><a href='https://rdrr.io/r/stats/cor.html'>cov2cor</a></span><span class='op'>(</span><span class='va'>V</span><span class='op'>[</span><span class='va'>dat</span><span class='op'>$</span><span class='va'>study</span> <span class='op'>==</span> <span class='fl'>24</span>, <span class='va'>dat</span><span class='op'>$</span><span class='va'>study</span> <span class='op'>==</span> <span class='fl'>24</span><span class='op'>]</span><span class='op'>)</span>
</div><div class='output co'>#&gt;      [,1] [,2]
#&gt; [1,]    1    0
#&gt; [2,]    0    1</div><div class='input'>
<span class='co'>### correlation matrix for study 29 with three independent groups</span>
<span class='fu'><a href='https://rdrr.io/r/stats/cor.html'>cov2cor</a></span><span class='op'>(</span><span class='va'>V</span><span class='op'>[</span><span class='va'>dat</span><span class='op'>$</span><span class='va'>study</span> <span class='op'>==</span> <span class='fl'>29</span>, <span class='va'>dat</span><span class='op'>$</span><span class='va'>study</span> <span class='op'>==</span> <span class='fl'>29</span><span class='op'>]</span><span class='op'>)</span>
</div><div class='output co'>#&gt;      [,1] [,2] [,3]
#&gt; [1,]    1    0    0
#&gt; [2,]    0    1    0
#&gt; [3,]    0    0    1</div><div class='input'>
<span class='co'>### fit multilevel model as above, but now use this V matrix in the model</span>
<span class='va'>res</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://wviechtb.github.io/metafor/reference/rma.mv.html'>rma.mv</a></span><span class='op'>(</span><span class='va'>yi</span>, <span class='va'>V</span>, random <span class='op'>=</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>|</span> <span class='va'>study</span><span class='op'>/</span><span class='va'>comp</span>, data<span class='op'>=</span><span class='va'>dat</span><span class='op'>)</span>
<span class='va'>res</span>
</div><div class='output co'>#&gt; 
#&gt; Multivariate Meta-Analysis Model (k = 66; method: REML)
#&gt; 
#&gt; Variance Components:
#&gt; 
#&gt;             estim    sqrt  nlvls  fixed      factor 
#&gt; sigma^2.1  0.0102  0.1009     31     no       study 
#&gt; sigma^2.2  0.0557  0.2360     66     no  study/comp 
#&gt; 
#&gt; Test for Heterogeneity:
#&gt; Q(df = 65) = 152.4935, p-val &lt; .0001
#&gt; 
#&gt; Model Results:
#&gt; 
#&gt; estimate      se     zval    pval   ci.lb   ci.ub 
#&gt;   0.6696  0.0546  12.2735  &lt;.0001  0.5626  0.7765  *** 
#&gt; 
#&gt; ---
#&gt; Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1
#&gt; </div><div class='input'><span class='fu'><a href='https://wviechtb.github.io/metafor/reference/predict.rma.html'>predict</a></span><span class='op'>(</span><span class='va'>res</span>, digits<span class='op'>=</span><span class='fl'>2</span><span class='op'>)</span>
</div><div class='output co'>#&gt; 
#&gt;  pred   se ci.lb ci.ub pi.lb pi.ub 
#&gt;  0.67 0.05  0.56  0.78  0.16  1.18 
#&gt; </div><div class='input'>
<span class='co'>### use cluster-robust inference methods based on this model</span>
<span class='fu'><a href='https://wviechtb.github.io/metafor/reference/robust.html'>robust</a></span><span class='op'>(</span><span class='va'>res</span>, cluster<span class='op'>=</span><span class='va'>dat</span><span class='op'>$</span><span class='va'>study</span><span class='op'>)</span>
</div><div class='output co'>#&gt; 
#&gt; Number of outcomes:   66
#&gt; Number of clusters:   31
#&gt; Outcomes per cluster: 1-8 (mean: 2.13, median: 1)
#&gt; 
#&gt; Model Results:
#&gt; 
#&gt; estimate      se     tval  df    pval   ci.lb   ci.ub 
#&gt;   0.6696  0.0543  12.3418  30  &lt;.0001  0.5588  0.7804  *** 
#&gt; 
#&gt; ---
#&gt; Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1
#&gt; </div><div class='input'>
<span class='co'>### illustrate use of the clubSandwich package together with metafor</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/jepusto/clubSandwich'>clubSandwich</a></span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>
<span class='fu'><a href='https://rdrr.io/pkg/clubSandwich/man/coef_test.html'>coef_test</a></span><span class='op'>(</span><span class='va'>res</span>, vcov<span class='op'>=</span><span class='st'>"CR2"</span>, cluster<span class='op'>=</span><span class='va'>dat</span><span class='op'>$</span><span class='va'>study</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/clubSandwich/man/conf_int.html'>conf_int</a></span><span class='op'>(</span><span class='va'>res</span>, vcov<span class='op'>=</span><span class='st'>"CR2"</span>, cluster<span class='op'>=</span><span class='va'>dat</span><span class='op'>$</span><span class='va'>study</span><span class='op'>)</span>
<span class='op'>}</span>
</div><div class='output co'>#&gt; <span class='message'>Loading required package: clubSandwich</span></div><div class='output co'>#&gt; <span class='message'>Registered S3 method overwritten by 'clubSandwich':</span>
#&gt; <span class='message'>  method    from    </span>
#&gt; <span class='message'>  bread.mlm sandwich</span></div><div class='output co'>#&gt;      Coef Estimate     SE d.f. Lower 95% CI Upper 95% CI
#&gt; 1 intrcpt     0.67 0.0543 22.3        0.557        0.782</div><div class='input'>
<span class='co'>### examine if task difficulty is a potential moderator of the effect</span>
<span class='va'>res</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://wviechtb.github.io/metafor/reference/rma.mv.html'>rma.mv</a></span><span class='op'>(</span><span class='va'>yi</span>, <span class='va'>V</span>, mods <span class='op'>=</span> <span class='op'>~</span> <span class='va'>difficulty</span>, random <span class='op'>=</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>|</span> <span class='va'>study</span><span class='op'>/</span><span class='va'>comp</span>, data<span class='op'>=</span><span class='va'>dat</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: Rows with NAs omitted from model fitting.</span></div><div class='input'><span class='va'>res</span>
</div><div class='output co'>#&gt; 
#&gt; Multivariate Meta-Analysis Model (k = 57; method: REML)
#&gt; 
#&gt; Variance Components:
#&gt; 
#&gt;             estim    sqrt  nlvls  fixed      factor 
#&gt; sigma^2.1  0.0465  0.2156     25     no       study 
#&gt; sigma^2.2  0.0275  0.1659     57     no  study/comp 
#&gt; 
#&gt; Test for Residual Heterogeneity:
#&gt; QE(df = 55) = 115.9211, p-val &lt; .0001
#&gt; 
#&gt; Test of Moderators (coefficient 2):
#&gt; QM(df = 1) = 10.0201, p-val = 0.0015
#&gt; 
#&gt; Model Results:
#&gt; 
#&gt;             estimate      se    zval    pval    ci.lb   ci.ub 
#&gt; intrcpt       0.1803  0.1682  1.0717  0.2838  -0.1494  0.5100     
#&gt; difficulty    0.1241  0.0392  3.1655  0.0015   0.0472  0.2009  ** 
#&gt; 
#&gt; ---
#&gt; Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1
#&gt; </div><div class='input'><span class='va'>sav</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://wviechtb.github.io/metafor/reference/robust.html'>robust</a></span><span class='op'>(</span><span class='va'>res</span>, cluster<span class='op'>=</span><span class='va'>dat</span><span class='op'>$</span><span class='va'>study</span><span class='op'>)</span>
<span class='va'>sav</span>
</div><div class='output co'>#&gt; 
#&gt; Number of outcomes:   57
#&gt; Number of clusters:   25
#&gt; Outcomes per cluster: 1-8 (mean: 2.28, median: 1)
#&gt; 
#&gt; Test of Moderators (coefficient 2):
#&gt; F(df1 = 1, df2 = 23) = 17.7635, p-val = 0.0003
#&gt; 
#&gt; Model Results:
#&gt; 
#&gt;             estimate      se    tval  df    pval    ci.lb   ci.ub 
#&gt; intrcpt       0.1803  0.1239  1.4547  23  0.1593  -0.0761  0.4367      
#&gt; difficulty    0.1241  0.0294  4.2147  23  0.0003   0.0632  0.1850  *** 
#&gt; 
#&gt; ---
#&gt; Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1
#&gt; </div><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/jepusto/clubSandwich'>clubSandwich</a></span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>
<span class='fu'><a href='https://rdrr.io/pkg/clubSandwich/man/coef_test.html'>coef_test</a></span><span class='op'>(</span><span class='va'>res</span>, vcov<span class='op'>=</span><span class='st'>"CR2"</span>, cluster<span class='op'>=</span><span class='va'>dat</span><span class='op'>$</span><span class='va'>study</span><span class='op'>)</span>
<span class='op'>}</span>
</div><div class='output co'>#&gt;        Coef. Estimate     SE t-stat d.f. p-val (Satt) Sig.
#&gt; 1    intrcpt    0.180 0.1244   1.45 7.77       0.1862     
#&gt; 2 difficulty    0.124 0.0299   4.15 7.39       0.0038   **</div><div class='input'>
<span class='co'>### draw bubble plot</span>
<span class='fu'><a href='https://wviechtb.github.io/metafor/reference/regplot.html'>regplot</a></span><span class='op'>(</span><span class='va'>sav</span>, xlab<span class='op'>=</span><span class='st'>"Task Difficulty"</span>, ylab<span class='op'>=</span><span class='st'>"Standardized Mean Difference"</span>, las<span class='op'>=</span><span class='fl'>1</span>, digits<span class='op'>=</span><span class='fl'>1</span>, bty<span class='op'>=</span><span class='st'>"l"</span><span class='op'>)</span>
</div><div class='img'><img src='dat.knapp2017-1.png' alt='' width='864' height='768' /></div><div class='input'>
<span class='co'># }</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Thomas White, Daniel Noble, Alistair Senior, W. Kyle Hamilton, Wolfgang Viechtbauer.</p>
</div>

<div class="pkgdown">
  <p>Made with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1, using <a href="https://preferably.amirmasoudabdol.name/?source=footer">preferably</a> template.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


